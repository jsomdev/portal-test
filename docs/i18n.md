# Internationalization (i18n)

## Introduction

The application will support multiple languages and, based on the culture / locale of the user, formatting of numbers, dates,... [React-intl](https://formatjs.io/docs/getting-started/installation/) will be used for translations and formatting. Next.js has built in [routing](https://nextjs.org/docs/advanced-features/i18n-routing) for internationalisation.

## Routing Configuration

Consider the following configuration in our next.config.js (irrelevant code has been omitted from the snippet)

```js
const supportedLocales = ["en", "nl", "nl-BE", "en-US", "fr-CA"];

module.exports = {
  i18n: {
    locales: supportedLocales,
    defaultLocale: "en",
    //localDetection: true
  },
};
```

### This will:

1. Provide routing integration for all supported locales.
2. Treat 'en' as default locale. (or fallback if the automatically detected locale is not supported)

## Sub-path routing use cases

The configuration described above, and the way Next.js Link components work, provide a solution for the following use cases.

- Automatically detect the locale of the user and apply it if it's supported.
- Sharing a url will include the locale.
- Able to switch between languages easily.

## SEO Optimization

To let search engines know about alternative versions of the page, a `<link>` must be included for each version (including the default) with `rel="alternate"` and `hreflang="${locale}"` defined properly.

There's multiple ways to achieve this. Adding them to the sitemap generation or adding them to the `<Head>` of each page.

In the first iteration of the application, the second approach will be implemented.

This function will generate alternate links that should be added to the `<Head>`

```typescript
/**
 * Function that renders alternate links for SEO purposes.
 * These should be added to the <Head>.
 * @param pathname name of the path that the links are generated for (e.g. /docs/i18n)
 * @returns an Array of alternate <link> components
 */
function renderAlternateLinks(pathname: string) {
  return (supportedLocales || []).map((locale) => (
    <link
      key={locale}
      rel="alternate"
      hrefLang={locale}
      href={`${process.env.baseUrl}/${locale}${pathname}`}
    />
  ));
}
```
